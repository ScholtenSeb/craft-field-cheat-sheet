{# ---------------------------------------------

Inspired by http://straightupcraft.com/search/results?q=cheat+sheet

Available methods within craft.fields:

 - getAllGroups($indexBy = null)
 - getGroupById($groupId)
 - getFieldById($fieldId)
 - getFieldByHandle($handle)
 - getAllFields($indexBy = null)
 - getFieldsByGroupId($groupId, $indexBy = null)
 - getLayoutById($layoutId)
 - getLayoutByType($type)
 - getAllFieldTypes()
 - getFieldType($class)
 - populateFieldType(FieldModel $field, $element = null)

Include Globals too? http://buildwithcraft.com/docs/globals

CP views for reference:

- craft/app/templates/settings/fields/index.html
- craft/app/templates/settings/fields/_edit.html
- craft/app/templates/_components/fieldtypes/{fieldType}/input.html
- craft/app/templates/_components/fieldtypes/{fieldType}/settings.html

Available values:

	required; bool; example: false
	translatable; string; example: 0 ('0' is what I've seen so far)
	id; string (the field ID); example: 1
	groupId; string; example: 1
	name; string; example: Body
	handle; string; example: body
	context; string; example: global (What is this?)
	instructions; string; example: "These are the field instructions."
	type; string; example: RichText (these are the fieldtype names)
	settings; array ; example: Array
	    (
	        [configFile] => Standard.json
	        [cleanupHtml] => 1
	        [purifyHtml] =>
	        [columnType] => text
	    )

--------------------------------------------- #}
{# Only render this template in dev mode #}
{%- if not craft.config.devMode %}{% exit 404 %}{% endif -%}

{# Settings #}
{%- set gameGenie = {

} -%}
{%- set version = '0.1' -%}
{%- set pageTitle = 'The Craft Field Cheatsheet ' ~ version -%}
{%- set groups = craft.fields.getAllGroups() -%}
{%- set fields = craft.fields.getAllFields() -%}

{%- set whitespace = '	' -%}
{%- set cpBase = siteUrl ~ craft.config.cpTrigger ~ '/' -%}

{%- set tagContexts = [
	{ 'title': 'Assets',     'tag': 'asset'},
	{ 'title': 'Categories', 'tag': 'category'},
	{ 'title': 'Entries',    'tag': 'entry'},
	{ 'title': 'Globals',    'tag': 'globalSet'},
	{ 'title': 'Tags',       'tag': 'tag'},
	{ 'title': 'Users',      'tag': 'user'},
] -%}
{%- set currentContext = craft.request.getParam('context')|default(2) -%}
{%- set sampleTag = tagContexts[currentContext].tag -%}


<html>
<head>

	<title>{{ pageTitle }} â€” for {{ siteName }}</title>

	<link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://raw.githubusercontent.com/dhg/Skeleton/master/css/normalize.css">
	<link rel="stylesheet" href="https://raw.githubusercontent.com/dhg/Skeleton/master/css/skeleton.css">

	<style type="text/css">
		@import url(http://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800|Merriweather:400,300|Inconsolata);*{box-sizing:border-box}html,body{margin:0;padding:0}.clear{clear:both}.contain{max-width:62.5em;margin:0 auto}header.main{position:fixed;z-index:2;top:0;left:0;width:100%}header.main .header_bg{width:100%;padding:2em 1em 0;background:#ff3333}header.main .heading{float:left;margin-bottom:.5em}header.main h1{float:left;color:white;margin:0;font-family:'Merriweather',serif;font-weight:400;font-size:1em;text-transform:uppercase}header.main h1 span{display:none;position:relative;margin:0 1em;font-family:'Open Sans',sans-serif;font-weight:300;font-size:.45455em;top:-.35em}header.main .craft_logo{display:none;position:relative;float:left;width:2.75em;top:.25em}header.main .focus_logo{display:none;position:absolute;top:50%;right:1em;width:1.875em;margin-top:-.9375em}@media (min-width: 25.625em){header.main .header_bg{padding:2em 3.75em 0 1em}header.main h1{font-size:1.375em}header.main .focus_logo{display:block}}@media (min-width: 32em){header.main h1 span{display:inline-block}header.main .craft_logo{display:block}}@media (min-width: 72.5em){header.main .header_bg{padding:2em 1em 0}}nav.element_type{clear:both}nav.element_type ul.types{list-style-type:none;margin:0;padding:0}nav.element_type ul.types li ul{list-style-type:none;margin:0;padding:1em 0}nav.element_type ul.types li ul li{display:inline-block;padding:.5em 0;font-size:.875em;margin-right:1em}nav.element_type ul.types li ul li a{float:left;text-decoration:none;color:white;font-family:'Open Sans',sans-serif;font-weight:300}nav.element_type ul.types>li{float:left;margin-right:1.5em}nav.element_type ul.types>li:last-child{margin-right:0}nav.element_type ul.types>li label{position:relative;display:block;color:white;font-family:'Open Sans',sans-serif;font-weight:300;font-size:.875em;text-decoration:none;padding-bottom:2.28571em;overflow:hidden;cursor:pointer}nav.element_type ul.types>li label::after{content:"";position:absolute;bottom:0;left:50%;margin-left:-.5em;border:.5em solid transparent;border-top:none;border-bottom-color:rgba(0,0,0,0.1);-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out}nav.element_type ul.types>li input[type="radio"]{position:absolute;left:-9999em}nav.element_type ul.types>li .element_type_tab{position:absolute;z-index:-1;bottom:0;left:0;width:100%;padding:0 1em;background:#ff3333;-webkit-transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out}nav.element_type ul.types>li .element_type_tab::before{content:"";position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.1)}nav.element_type ul.types>li input[type="radio"]:checked ~ label:after{-webkit-transform:translateY(0);transform:translateY(0)}nav.element_type ul.types>li input[type="radio"]:checked ~ .element_type_tab{-webkit-transform:translateY(100%);transform:translateY(100%)}@media (min-width: 25.625em){nav.element_type ul.types>li .element_type_tab{padding:0 3.75em 0 1em}}@media (min-width: 50em){nav.element_type{clear:none;float:right;}nav.element_type ul.types{float:right}nav.element_type ul.types>li label{padding-bottom:2.5em}}@media (min-width: 72.5em){nav.element_type ul.types>li .element_type_tab{padding:0 1em}}

	</style>

</head>
<body>

<header id="header">
	<div class="container">
		<div class="row">
			<h1>Field Syntax Cheatsheet</h1>
			<ul>
				<li>Context:</li>
				{% for key, context in tagContexts %}
				<li><a class="context{% if key == currentContext %} activeContext{% endif %}" href="{{ craft.request.url }}?context={{ key }}" data-tag="{{ context.tag }}">{{ context.title }}</a></li>
				{% endfor %}
			</ul>
		</div>
	</div>
</header>

<div class="container">

	<div class="row">

		<div class="three columns">
			<nav>
				<ul>
				{% for field in fields %}
					<li><a href="#{{ field.handle }}">{{ field.name }}</a></li>
				{% endfor %}
				</ul>
			</nav>
		</div>


		<div class="nine columns">

			{% for field in fields %}

{# Dev conditional to single out 1 field while building code #}
{# {% if field.handle == 'customMeta' %} #}

				<h3 id="{{ field.handle }}">{{ field.name }}</h3>
				<p>Type: {{ field.type|replace('/(.)([A-Z])/', '$1 $2') }} (<a href="http://buildwithcraft.com/docs/{{ field.type|replace('/(.)([A-Z])/', '$1-$2')|lower }}-fields">Tag documentation</a> | <a href="{{ cpBase }}/settings/fields/edit/{{ field.id }}">View in control panel</a>)</p>

				{# ---------------------------------------------

				Switch statement to build our code samples
				based on the field type

				--------------------------------------------- #}

				{% switch field.type %}
					{% case 'Assets' %}
					
						<h4>Total number of assets</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ '|length }}'
						}}</code></pre>
					
					
						<h4>Common conditional</h4>
						<pre><code>{{
							  '{% if '
							~ sampleTag ~ '.' ~ field.handle
							~ '|length %}<br/>'
							~ whitespace
							~ '...<br/>{% endif %}'
						}}</code></pre>
					
					
						<h4>Loop through assets</h4>
						<pre><code>{{
							  '{% for myAsset in '
							~ sampleTag ~ '.' ~ field.handle
							~ ' %}<br/>'
							~ whitespace
							~ '{{ myAsset.url }}<br/>{% endfor %}'
						}}</code></pre>
					
					
						<h4>Only return the first asset</h4>
						<pre><code>{{
							  '{% set myAsset = '
							~ sampleTag ~ '.' ~ field.handle
							~ '.first() %}<br/>{% if myAsset %}<br/>'
							~ whitespace
							~ '{{ myAsset.url }}<br/>{% endif %}'
						}}</code></pre>
					
					
						<h4>Adjusting the limit</h4>
						<pre><code>{{
							  '{% for block in '
							~ sampleTag ~ '.' ~ field.handle
							~ '.limit(5) %}'
						}}</code></pre>
					
					
						<h4>All asset variables</h4>
						<pre><code>{{
							  '{% set myAsset = '
							~ sampleTag ~ '.' ~ field.handle
							~ '.first() %}<br/>{% if myAsset %}<br/>'
							~ whitespace
							~ '{{ myAsset.dateCreated }}<br/>'
							~ whitespace
							~ '{{ myAsset.dateUpdated }}<br/>'
							~ whitespace
							~ '{{ myAsset.extension }}<br/>'
							~ whitespace
							~ '{{ myAsset.filename }}<br/>'
							~ whitespace
							~ '{{ myAsset.folder }}<br/>'
							~ whitespace
							~ '{{ myAsset.folderId }}<br/>'
							~ whitespace
							~ '{{ myAsset.height }}<br/>'
							~ whitespace
							~ '{{ myAsset.id }}<br/>'
							~ whitespace
							~ '{{ myAsset.img }}<br/>'
							~ whitespace
							~ '{{ myAsset.kind }}<br/>'
							~ whitespace
							~ '{{ myAsset.locale }}<br/>'
							~ whitespace
							~ '{{ myAsset.link }}<br/>'
							~ whitespace
							~ '{{ myAsset.mimeType }}<br/>'
							~ whitespace
							~ '{{ myAsset.next }}<br/>'
							~ whitespace
							~ '{{ myAsset.prev }}<br/>'
							~ whitespace
							~ '{{ myAsset.size }}<br/>'
							~ whitespace
							~ '{{ myAsset.source }}<br/>'
							~ whitespace
							~ '{{ myAsset.sourceId }}<br/>'
							~ whitespace
							~ '{{ myAsset.url }}<br/>'
							~ whitespace
							~ '{{ myAsset.width }}<br/>{% endif %}'
						}}</code></pre>
					
					
						<h4>All asset methods</h4>
						<pre><code>{{
							  '{% set myAsset = '
							~ sampleTag ~ '.' ~ field.handle
							~ '.first() %}<br/>{% if myAsset %}<br/>'
							~ whitespace
							~ '{{ myAsset.getExtension() }}<br/>'
							~ whitespace
							~ '{{ myAsset.getFolder() }}<br/>'
							~ whitespace
							~ '{{ myAsset.getHeight( transform ) }}<br/>'
							~ whitespace
							~ '{{ myAsset.getImg() }}<br/>'
							~ whitespace
							~ '{{ myAsset.getLink() }}<br/>'
							~ whitespace
							~ '{{ myAsset.getMimeType() }}<br/>'
							~ whitespace
							~ '{{ myAsset.getNext( params ) }}<br/>'
							~ whitespace
							~ '{{ myAsset.getPrev( params ) }}<br/>'
							~ whitespace
							~ '{{ myAsset.getSource() }}<br/>'
							~ whitespace
							~ '{{ myAsset.getUrl( transform ) }}<br/>'
							~ whitespace
							~ '{{ myAsset.getWidth( transform ) }}<br/>'
							~ whitespace
							~ '{{ myAsset.setTransform( transform ) }}<br/>{% endif %}'
						}}</code></pre>
					
						<hr/>
					
					
					{% case 'Color' %}
					
						<h4>Field name</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ ' }}'
						}}</code></pre>
					
					
						<h4>"If exists" conditional</h4>
						<pre><code>{{
							  '{% if '
							~ sampleTag ~ '.' ~ field.handle
							~ '|length %} ... {% endif %}'
						}}</code></pre>
					
						<hr/>
					
					
					{% case 'Dropdown' %}
					
						<h4>Field name</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ ' }}'
						}}</code></pre>
					
					
						<h4>Field label</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ '.label }}'
						}}</code></pre>
					
					
						<h4>Loop through the options</h4>
						<pre><code>{{
							  '&lt;ul&gt;<br/>'
							~ whitespace
							~ '{% for option in '
							~ sampleTag ~ '.' ~ field.handle
							~ '.options %}<br/>'
							~ whitespace ~ whitespace
							~ '&lt;li&gt;{{ option }}&lt;/li&gt;<br/>'
							~ whitespace
							~ '{% endfor %}<br/>&lt;/ul&gt;'
						}}</code></pre>
					
						<hr/>
					
					
					{% case 'Lightswitch' %}
					
						<h4>Boolean Conditional</h4>
						<pre><code>{{
							  '{% if '
							~ sampleTag ~ '.' ~ field.handle
							~ ' %} ... {% endif %}'
						}}</code></pre>
					
						<hr/>
					
					
					{% case 'Matrix' %}
					
						<h4>Total number of blocks</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ '|length }}'
						}}</code></pre>
					
					
						<h4>Loop through blocks</h4>
						<pre><code>{{
							  '{% for block in '
							~ sampleTag ~ '.' ~ field.handle
							~ ' %}<br/>'
							~ whitespace
							~ '...<br/>{% endfor %}'
						}}</code></pre>
					
					
						<h4>Filtering by block type</h4>
						<pre><code>{{
							  '{% for block in '
							~ sampleTag ~ '.' ~ field.handle
							~ '.type(\'text\') %}'
						}}</code></pre>
					
					
						<h4>Adjusting the limit</h4>
						<pre><code>{{
							  '{% for block in '
							~ sampleTag ~ '.' ~ field.handle
							~ '.limit(5) %}'
						}}</code></pre>
					
					
						<h4>All block types</h4>
						<pre><code>{{
							  '{% for block in '
							~ sampleTag ~ '.' ~ field.handle
							~ ' %}<br/>'
							~ whitespace
							~ '...<br/>{% endfor %}'
						}}</code></pre>
					
					
						<h4><em>In progress...</em></h4>
						{% for blockType in field.getFieldType().getSettings().getBlockTypes() %}
							<h5>Block: {{ blockType.name }} ({{ blockType.handle }})</h5>
							<p><strong>Details:</strong></p>
							<ul>
							{% for matrixField in blockType.getFields() %}
								<li>{{ matrixField.name }} ({{ matrixField.handle }})</li>
							{% endfor %}
							</ul>
						{% endfor %}
					
						<hr/>
					
					
					{% case 'Number' %}
					
						<h4>Field name</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ ' }}'
						}}</code></pre>
					
					
						<h4>Comparison conditional</td></h4>
						<pre><code>{{
							  '{% if '
							~ sampleTag ~ '.' ~ field.handle
							~ ' > 0 %} ... {% endif %}'
						}}</code></pre>
					
					
						<h4>Operations</h4>
						<pre><code>{{
							  '{% set myResult = 42 * '
							~ sampleTag ~ '.' ~ field.handle
							~ ' %}'
							~ '<br/><br/>The total is {{ myResult }}'
						}}</code></pre>
					
						<hr/>
					
					
					{% case 'PlainText' %}
					
						<h4>Field name</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ ' }}'
						}}</code></pre>
					
					
						<h4>"If exists" conditional</h4>
						<pre><code>{{
							  '{% if '
							~ sampleTag ~ '.' ~ field.handle
							~ '|length %} ... {% endif %}'
						}}</code></pre>
					
						<hr/>
					
					
					{% case 'RichText' %}
					
						<h4>Field name</h4>
						<pre><code>{{
							  '{{ '
							~ sampleTag ~ '.' ~ field.handle
							~ ' }}'
						}}</code></pre>
					
					
						<h4>"If exists" conditional</h4>
						<pre><code>{{
							  '{% if '
							~ sampleTag ~ '.' ~ field.handle
							~ '|length %} ... {% endif %}'
						}}</code></pre>


						<hr/>

					{% default %}

						<p class="todo">No code samples available for this field type yet.</p>
						<hr/>

				{% endswitch %}

{# Dev conditional to single out 1 field while building code #}
{# {% endif %} #}

			{% endfor %}

		</div>
	</div>

	<footer>
		<p>{{ pageTitle }}</p>
		<p>Provided by your friends at <a href="http://twitter.com/focuslabllc">Focus Lab</a>.</p>
	</footer>


</div>

<script type="text/javascript">
	/*{# ---------------------------------------------
	   Remember that twig tags within the JS below
	   will be parsed by twig before the DOM reads
	   and runs the JS. Keep an eye out for:
	
	   {{ }} sets
	   {% %} sets
	--------------------------------------------- #}*/
	
	var currentContext = '{{ sampleTag }}', newContext;
	
	function clickListen(e) {
		if (e.path[0].attributes['data-tag']) { switchContext(e); return; }
		if (e.target.localName == 'code') { selectCodeSnippet(e.target); return; }
	}
	
	function switchContext(e) {
		e.preventDefault();
		if ( ! e.path[0].attributes['data-tag']) { return false; }
	
		newContext = e.path[0].attributes['data-tag'].value;
		if (newContext === currentContext) { return; }
	
		e = e || window.event;
		var target = e.target || e.srcElement;
	
		if (target.className.match(/\bcontext\b/)) {
			{% verbatim -%} // jshint ignore:line
			document.body.innerHTML = document.body.innerHTML.replace(
				new RegExp('([{%].*?)(' + currentContext + ')(.*?[%}])','g'),
				'$1' + newContext +'$3'
			);
			{% endverbatim -%} // jshint ignore:line
			currentContext = newContext;
			document.getElementsByClassName('activeContext')[0].className = 'context';
			document.querySelectorAll('[data-tag=' + newContext +']')[0].className += ' activeContext';
		}
	}
	
	function selectCodeSnippet(elem) {
		var range = document.createRange();
		range.selectNodeContents(elem);
		var sel = window.getSelection();
		sel.removeAllRanges();
		sel.addRange(range);
	}
	
	window.onload = function () {
		setInterval(function(){
			document.getElementById('header').className = (window.pageYOffset > 15) ? 'short' : '' ;
		}, 300);
	
		if (document.body.addEventListener) {
			document.body.addEventListener('click', clickListen, false);
		} else {
			document.body.attachEvent('onclick', clickListen);
		}
	};
	
	/*{# ---------------------------------------------
	
	We're using Google Analytics to track usage.
	We appreciate the page load hit tracking in
	exchange for this free resource. That said,
	feel free to remove this if you'd prefer we not
	count your page loads.
	
	We're tracking:
	
	- The version of this cheatsheet
	- The # of Field Groups the install has
	- The # of Fields the install has
	
	--------------------------------------------- #}*/
	
	// (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	// ga('set', 'dimension1', '{{ version }}');       // version
	// ga('set', 'dimension2', '{{ groups|length }}'); // field group count
	// ga('set', 'dimension3', '{{ fields|length }}'); // field count
	// ga('create', 'UA-3994429-34', 'auto');
	// ga('send', 'pageview');

</script>

</body>
</html>